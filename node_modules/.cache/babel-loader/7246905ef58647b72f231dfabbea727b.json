{"ast":null,"code":"'use strict';\n\nvar multiaddr = require('multiaddr');\n\nvar loadCommands = require('./utils/load-commands');\n\nvar getConfig = require('./utils/default-config');\n\nvar sendRequest = require('./utils/send-request');\n\nfunction IpfsAPI(hostOrMultiaddr, port, opts) {\n  var config = getConfig();\n\n  try {\n    var maddr = multiaddr(hostOrMultiaddr).nodeAddress();\n    config.host = maddr.address;\n    config.port = maddr.port;\n  } catch (e) {\n    if (typeof hostOrMultiaddr === 'string') {\n      config.host = hostOrMultiaddr;\n      config.port = port && typeof port !== 'object' ? port : config.port;\n    }\n  }\n\n  var lastIndex = arguments.length;\n\n  while (!opts && lastIndex-- > 0) {\n    opts = arguments[lastIndex];\n    if (opts) break;\n  }\n\n  Object.assign(config, opts); // autoconfigure in browser\n\n  if (!config.host && typeof self !== 'undefined') {\n    var split = self.location.host.split(':');\n    config.host = split[0];\n    config.port = split[1];\n  }\n\n  var requestAPI = sendRequest(config);\n  var cmds = loadCommands(requestAPI, config);\n  cmds.send = requestAPI;\n  cmds.Buffer = Buffer; // Added buffer in types (this should be removed once a breaking change is release)\n\n  return cmds;\n}\n\nexports = module.exports = IpfsAPI;","map":null,"metadata":{},"sourceType":"script"}